# SCsub

Import('env')

sources = [
    "register_types.cpp",
    "godotcord.cpp",
    "godotcord_network_peer.cpp",
    "discord-files/achievement_manager.cpp",
    "discord-files/activity_manager.cpp",
    "discord-files/application_manager.cpp",
    "discord-files/core.cpp",
    "discord-files/image_manager.cpp",
    "discord-files/lobby_manager.cpp",
    "discord-files/network_manager.cpp",
    "discord-files/overlay_manager.cpp",
    "discord-files/relationship_manager.cpp",
    "discord-files/storage_manager.cpp",
    "discord-files/store_manager.cpp",
    "discord-files/types.cpp",
    "discord-files/user_manager.cpp",
    "discord-files/voice_manager.cpp"
]

module_env = env.Clone()
module_env.add_source_files(env.modules_sources, sources)
module_env.Append(CPPPATH=['.', "discord-files"])
module_env.Append(LIBPATH=['libpath'])
env.Append(LIBPATH=['#modules/godotcord/libpath'])
if env["platform"] == "windows":
    module_env.Append(LIBS=['discord_game_sdk.dll.lib'])
    env.Append(LINKFLAGS=['discord_game_sdk.dll.lib'])
elif(env["platform"] == "x11"):
    module_env.Append(LIBS=['discord_game_sdk.so']);
    env.Append(LINKFLAGS=['modules/godotcord/libpath/discord_game_sdk.so']);